<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Zine 2022">
  <meta property="og:description" content="Zine 2022" />
  <meta property="og:title" content="Pedro Marques Pereira - Zine 2022" />
  <meta property="og:url" content="https://pedromarquespereira.github.io/work/zine" />
  <meta property="og:image" content="https://pedromarquespereira.github.io/work/img/zine/zine_5.webp"/>
  <meta property="og:type" content="website"/>
  <title>Pedro Marques Pereira</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&display=swap" as="style" onload="this.rel='stylesheet'">
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&display=swap" rel="stylesheet">
  </noscript>
  <link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
  <link rel="shortcut icon" type="image/png" href="../favicon.png">
  <link rel="alternate" hreflang="en" href="https://pedromarquespereira.github.io/work/zine" />
  <link rel="alternate" hreflang="pt" href="https://pedromarquespereira.github.io/work/zine/pt" />
  <link rel="alternate" hreflang="x-default" href="https://pedromarquespereira.github.io/work/zine" />
  <style>
  /* === CSS RESET === */
  html,
  body,
  div,
  span,
  h1,
  p,
  a,
  img,
  ul,
  li
  {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
  }
  body {
    background-color: #000;
    height: 100%;
    line-height: 1;
  }
  /*FADE*/
  .fade {
    opacity: 0;
    animation: fadein 0.3s ease-in forwards;
  }
  @keyframes fadein {
    to {
      opacity: 1;
      }
    }
  /* === TYPOGRAPHY === */
  .back,
  .btn,
  .dropd {
    font-family: 'Inter', sans-serif;
    text-decoration: none;
    font-size: 23px;
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  .dropd{
    display: block;
    margin-top: 9px;
    font-size: 15px;
    color: white;
  }
  .top,
  .bottom {
    position: fixed;
    width: 100%;
    left: 50%;
    transform: translateX(-50%);
    height: 60px;
    background-color: #000;
    box-shadow: 0 0 1px #000, 0 0 3px #000, 0 0 7px #000, 0 0 10px #000;
  }
  .top {
    top: 0;
    max-width: 100dvw;
  }
  .bottom {
    bottom: 0;
    outline: #000 3px;
  }
  /* === COMPONENTS === */
  .back,
  .menu{
    position: fixed;
    display: flex;
    top: 20px;
    z-index: 1;
  }
  .back {
    left: 15px;
    right:auto;
    font-size: 30px;
  }
  .menu {
    right:15px;
    left: auto;
  }
  .dropdown {
  display: none;
  text-align: right;
  }
  .dropd {
  cursor: pointer;
  }
  .dropcontent {display:none;}
  /* DROPvsHORIZONTAL */
  @media screen and (max-width: 500px) {
  .dropdown {
    display: block;
  }
  .h-menu {
    display: none;
  }
  }
  @media screen and (min-width: 501px) {
  .dropdown {
    display: none;
  }
  .h-menu {
    display: flex;
    gap: 15px;
  }
  }
  .c,
  .lang{
    z-index: 1;
    position: fixed;
    display: flex;
    top:auto;
  }
  .c{
    bottom:1px;
    left: auto;
    right: 4px;
    z-index: 2;
  }
  .c span{
    font-family: sans-serif;
    font-weight: 300;
    font-size: 8px;
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  .lang {
    bottom: 30px;
    left: 15px;
  }
  /*--------------Project---------------*/
  .title{
    display: flex;
    position: fixed;
    top:20px;
    left:40px;
    color:#fff;
    align-items: baseline;
    text-align: left;
    font-family: 'Inter', sans-serif;
  }
  .title h1{
    font-size: 23px;
    font-weight: 300;
  }
  .title span{
    font-size: 15px;
    margin-left: 4px;
  }
  .proj{
    display: flex;
    flex-direction: column;
    z-index: -1;
    top:58px;
    width: calc(100dvw - 30px);
    margin: 0 15px;
    position: absolute;
    align-items: center;
  }
  .img-cont{
    display: flex;
    position: relative;
    margin: 10px 0px;
    flex-direction: column;
    align-items: flex-start;
    width: auto;
    max-width: calc(100vw - 30px);
    gap: 10px;
  }
  .img-cont img {
    width: 100%;
    height: auto;
    max-height: calc(100vh - 220px);
    object-fit: contain;
    cursor: pointer;
  }
  .img-cont span{
    display: flex;
    font-size: 10px;
    font-family: 'Inter', sans-serif;
    color: #fff;
    margin-left: auto;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;

  }
  .info{
    display: flex;
    flex-direction: column;
    align-self: start;
    width: fit-content;
  }
  .info p{
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: #fff;
    line-height: 25px;
  }
  /*___________gallery---------*/
  .gallery{
    z-index: 1;
    display: none;
    position: fixed;
    top:0;
    width:calc(100dvw - 30px);
    height:calc(100dvh - 15px);
    margin:0 15px;
    background-color: #000;
  }
  .gallery-back{
    display: flex;
    top: 18px;
    left: 15px;
    right:auto;
    position: fixed;
    font-size: 24px;
    color:#fff;
    font-family: sans-serif;
    cursor: pointer;
  }
  .gallery-img{
    position: fixed;
    top:50%;
    left:50%;
    transform: translate(-50%,-50%);
    display: block;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .arrows{
    display: block;
    width:100%;
    margin-top: 10px;
  }
  .gallery-img span{
    font-size: 20px;
    color:#fff;
    font-family: 'Inter',sans-serif;
    cursor: pointer;
    font-weight: lighter;
  }
  .left{
    position: absolute;
    display: none;
    left:0;
    right:auto;
    margin-left: 5px;
  }
  .right{
    position: absolute;
    display: inline;
    left:auto;
    right:0;
    margin-right: 5px;
  }
  </style>
  <link rel="stylesheet" href="../style.css" media="print" onload="this.media='all'">
</head>
<body class="fade">
  <header class="top">
    <a href="../work" class="back">*</a>
    <div class="menu">
      <div class="dropdown"><span class="dropd">&bull;&bull;&bull;</span>
                            <ul class="dropcontent">
                              <li><a href="../about" class="btn">about</a></li>
                              <li><a href="../contact" class="btn">contact</a></li>
                              <li><a href="https://www.instagram.com/pedro.marques.pereira/" class="btn" target="_blank" rel="noopener noreferrer">social</a></li>
                            </ul>
      </div>
      <div class="h-menu">
        <a href="../about" class="btn">about</a>
        <a href="../contact" class="btn">contact</a>
        <a href="https://www.instagram.com/pedro.marques.pereira/" class="btn" target="_blank" rel="noopener noreferrer">social</a>
      </div>
    </div>
      <div class="title">
        <h1>Zine</h1><span>2022</span>
      </div>
  </header>
  <main>
    <section class="proj">
      <div class="img-cont">
        <img id="rotating-image" class="main"
          src="./img/zine/640/zine_cover.webp"
          srcset="./img/zine/480/zine_cover.webp 507w,
                  ./img/zine/640/zine_cover.webp 676w,
                  ./img/zine/1080/zine_cover.webp 1183w"
                  sizes="(max-width: 500px) 100vw,
                  (max-width: 800px) 676px,
                  1183px"
          width="1183"
          height="1680"
          fetchpriority="high"
          alt="Zine_Cover">
          <span>click image for more</span>
        <div class="info">
          <p>14,8 x 21 cm, 18 pages</p>
          <p>56 copies (sold out)</p>
        </div>
      </div>
    </section>
    <section class="gallery">
      <div class="gallery-back">
        <span>×</span>
      </div>
      <div class="gallery-img">
        <img class="one" loading="lazy" src="./img/zine/640/zine_1.webp"
        srcset="./img/zine/640/zine_1.webp 646w,
                ./img/zine/1080/zine_1.webp 1086w,
                ./img/zine/1440/zine_1.webp 1445w"
        sizes="(max-width: 646px) 646px,
               (max-width: 1088px) 1088px,
               1445px"
        width="646"
        height="456"
        alt="Zine_Spread">
        <div class="arrows">
            <span class="left"><</span>
            <span class="right">></span>
        </div>
      </div>
    </section>
  </main>
  <footer class="bottom">
      <div class="lang"><a href="./zine/pt" lang="pt" class="btn">pt</a></div>
      <div class="c"><span>© Pedro Marques Pereira 2025</span></div>
  </footer>
<script defer>
document.addEventListener("DOMContentLoaded", function () {
  // --- Dropdown Menu Hover and Click ---
  const dropTrigger = document.querySelector(".dropd");
  const dropContent = document.querySelector(".dropcontent");
  let dropdownOpen = false;

  if (dropTrigger && dropContent) {
    const toggleDropdown = (show) => {
      if (show) {
        dropContent.classList.add("show");
      } else {
        dropContent.classList.remove("show");
      }
    };

    dropTrigger.addEventListener("mouseover", () => toggleDropdown(true));
    dropContent.addEventListener("mouseover", () => toggleDropdown(true));
    dropTrigger.addEventListener("mouseout", () => {
      setTimeout(() => {
        if (!dropTrigger.matches(":hover") && !dropContent.matches(":hover")) {
          toggleDropdown(false);
        }
      }, 100);
    });
    dropContent.addEventListener("mouseout", () => {
      setTimeout(() => {
        if (!dropTrigger.matches(":hover") && !dropContent.matches(":hover")) {
          toggleDropdown(false);
        }
      }, 100);
    });
    dropTrigger.addEventListener("click", () => {
      dropdownOpen = !dropdownOpen;
      toggleDropdown(dropdownOpen);
    });
  }
  // --- Responsive Gallery Image Paths Builder ---
  function getResponsiveImagePaths() {
    const width = window.innerWidth;
    let folder = "1440";
    if (width <= 640) folder = "640";
    else if (width <= 1080) folder = "1080";

    return [
      `./img/zine/${folder}/zine_1.webp`,
      `./img/zine/${folder}/zine_2.webp`,
      `./img/zine/${folder}/zine_3.webp`,
      `./img/zine/${folder}/zine_4.webp`,
      `./img/zine/${folder}/zine_5.webp`,
      `./img/zine/${folder}/zine_6.webp`,
      `./img/zine/${folder}/zine_7.webp`,
      `./img/zine/${folder}/zine_8.webp`,
      `./img/zine/${folder}/zine_9.webp`
    ];
  }

  let imageSources = getResponsiveImagePaths();
  window.addEventListener("resize", () => {
    imageSources = getResponsiveImagePaths();
    updateImage();
  });

  // --- Gallery Elements ---
  const gallery = document.querySelector(".gallery");
  const galleryBack = document.querySelector(".gallery-back");
  const image = document.querySelector(".gallery-img img.one");
  const leftArrow = document.querySelector(".gallery-img .arrows .left");
  const rightArrow = document.querySelector(".gallery-img .arrows .right");
  const rotatingImage = document.querySelector("#rotating-image");

  let currentIndex = 0;
  let galleryKeyboardEnabled = false;

  function updateImage() {
    if (!image) return;

    const currentSrc = imageSources[currentIndex];

    // Get filename only
    const filename = currentSrc.split('/').pop();

    // Build srcset for all sizes
    const src640 = `./img/zine/640/${filename}`;
    const src1080 = `./img/zine/1080/${filename}`;
    const src1440 = `./img/zine/1440/${filename}`;

    image.src = currentSrc;
    image.srcset = `${src640} 646w, ${src1080} 1088w, ${src1440} 1445w`;

    // Arrow visibility
    leftArrow.style.display = currentIndex === 0 ? "none" : "inline-block";
    rightArrow.style.display = currentIndex === imageSources.length - 1 ? "none" : "inline-block";

    adjustGalleryImage();
  }

  function openGallery() {
    if (!gallery) return;
    gallery.style.display = "block";
    gallery.classList.add("fade");
    setTimeout(() => gallery.classList.remove("fade"), 300);
    currentIndex = 0;
    galleryKeyboardEnabled = true;
    updateImage();
  }

  function closeGallery() {
    if (!gallery) return;
    gallery.style.display = "none";
    galleryKeyboardEnabled = false;
  }

  // --- Gallery Click Events ---
  if (rotatingImage) rotatingImage.addEventListener("click", openGallery);
  if (galleryBack) galleryBack.addEventListener("click", closeGallery);

  if (leftArrow) {
    leftArrow.addEventListener("click", () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateImage();
      }
    });
  }

  if (rightArrow) {
    rightArrow.addEventListener("click", () => {
      if (currentIndex < imageSources.length - 1) {
        currentIndex++;
        updateImage();
      }
    });
  }

  // --- Keyboard Navigation ---
  document.addEventListener("keydown", (event) => {
    if (!galleryKeyboardEnabled || !gallery || gallery.style.display !== "block") return;

    const navKeys = ["ArrowLeft", "ArrowRight", "Escape", " ", "Enter", "Home", "End"];
    if (navKeys.includes(event.key)) event.preventDefault();

    switch (event.key) {
      case "ArrowLeft":
        if (currentIndex > 0) currentIndex--;
        break;
      case "ArrowRight":
      case " ":
        if (currentIndex < imageSources.length - 1) currentIndex++;
        break;
      case "Escape":
      case "Enter":
        closeGallery();
        return;
      case "Home":
        currentIndex = 0;
        break;
      case "End":
        currentIndex = imageSources.length - 1;
        break;
      case "1":
      case "2":
      case "3":
      case "4":
      case "5":
      case "6":
      case "7":
      case "8":
      case "9":
        const imageNumber = parseInt(event.key);
        if (imageNumber >= 1 && imageNumber <= imageSources.length) {
          currentIndex = imageNumber - 1;
        }
        break;
    }
    updateImage();
  });

  // --- Resize Image to Fit Viewport ---
  function adjustGalleryImage() {
    if (!image) return;

    const maxW = window.innerWidth - 30;
    const maxH = window.innerHeight - 160;

    const temp = new Image();
    temp.src = image.src;

    temp.onload = () => {
      const ratio = temp.naturalWidth / temp.naturalHeight;

      if (maxW / ratio <= maxH) {
        image.style.width = `${maxW}px`;
        image.style.height = "auto";
      } else {
        image.style.width = "auto";
        image.style.height = `${maxH}px`;
      }
    };
  }

  window.addEventListener("load", adjustGalleryImage);
  window.addEventListener("resize", adjustGalleryImage);
});
</script>

</body>
</html>
